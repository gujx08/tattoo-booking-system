<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é¢„è®¢è‰ç¨¿é‚®ä»¶æµ‹è¯• - Patch Tattoo Therapy</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        .test-button:hover { background: #0056b3; }
        .success { background: #28a745; }
        .warning { background: #ffc107; color: #000; }
        .info { background: #17a2b8; }
        .debug-info { background: #f8f9fa; padding: 10px; border-radius: 3px; margin: 10px 0; }
        .data-display { background: #e9ecef; padding: 10px; border-radius: 3px; margin: 10px 0; font-family: monospace; font-size: 12px; }
    </style>
</head>
<body>
    <h1>ğŸ§ª é¢„è®¢è‰ç¨¿é‚®ä»¶åŠŸèƒ½æµ‹è¯•</h1>
    
    <div class="debug-info">
        <h3>ğŸ” åŠŸèƒ½è¯´æ˜</h3>
        <p><strong>è§¦å‘æ—¶æœº:</strong> ç”¨æˆ·åœ¨å’¨è¯¢é€‰æ‹©é¡µé¢ç‚¹å‡»ä»»ä¸€é€‰é¡¹å</p>
        <p><strong>é‚®ä»¶å†…å®¹:</strong> åŒ…å«å®Œæ•´çš„6æ­¥è¡¨å•æ•°æ® + å’¨è¯¢é€‰æ‹©</p>
        <p><strong>æ”¶ä»¶äºº:</strong> info@patchtattootherapy.com</p>
        <p><strong>æ•°æ®ä¿å­˜:</strong> localStorage + é‚®ä»¶å‘é€</p>
    </div>

    <div class="test-section">
        <h3>ğŸ“‹ æµ‹è¯•é¢„è®¢æµç¨‹</h3>
        <button class="test-button" onclick="testCompleteFlow()">æµ‹è¯•å®Œæ•´é¢„è®¢æµç¨‹</button>
        <button class="test-button success" onclick="testConsultationChoice()">æµ‹è¯•å’¨è¯¢é€‰æ‹©é¡µé¢</button>
        <button class="test-button warning" onclick="testPaymentPage()">æµ‹è¯•æ”¯ä»˜é¡µé¢æ•°æ®æ¢å¤</button>
        <button class="test-button info" onclick="clearTestData()">æ¸…é™¤æµ‹è¯•æ•°æ®</button>
    </div>

    <div class="test-section">
        <h3>ğŸ“§ é‚®ä»¶å†…å®¹é¢„è§ˆ</h3>
        <div id="emailPreview" class="data-display">
            <p>ç‚¹å‡»æµ‹è¯•æŒ‰é’®æŸ¥çœ‹é‚®ä»¶å†…å®¹é¢„è§ˆ...</p>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ’¾ localStorageæ•°æ®</h3>
        <div id="localStorageData" class="data-display">
            <p>ç‚¹å‡»æµ‹è¯•æŒ‰é’®æŸ¥çœ‹localStorageæ•°æ®...</p>
        </div>
    </div>

    <div class="test-section">
        <h3>ğŸ¯ æµ‹è¯•æ­¥éª¤</h3>
        <ol>
            <li><strong>æ­¥éª¤1:</strong> ç‚¹å‡»"æµ‹è¯•å®Œæ•´é¢„è®¢æµç¨‹" - æ¨¡æ‹Ÿç”¨æˆ·å¡«å†™6æ­¥è¡¨å•</li>
            <li><strong>æ­¥éª¤2:</strong> ç‚¹å‡»"æµ‹è¯•å’¨è¯¢é€‰æ‹©é¡µé¢" - æ¨¡æ‹Ÿç”¨æˆ·é€‰æ‹©å’¨è¯¢é€‰é¡¹</li>
            <li><strong>æ­¥éª¤3:</strong> æŸ¥çœ‹é‚®ä»¶å†…å®¹é¢„è§ˆå’ŒlocalStorageæ•°æ®</li>
            <li><strong>æ­¥éª¤4:</strong> ç‚¹å‡»"æµ‹è¯•æ”¯ä»˜é¡µé¢æ•°æ®æ¢å¤" - éªŒè¯æ•°æ®æ¢å¤åŠŸèƒ½</li>
            <li><strong>æ­¥éª¤5:</strong> è®¿é—®ä¸»åº”ç”¨æµ‹è¯•å®é™…åŠŸèƒ½</li>
        </ol>
    </div>

    <div class="test-section">
        <h3>ğŸ“ é¢„æœŸç»“æœ</h3>
        <p>âœ… <strong>é‚®ä»¶å‘é€:</strong> ç®¡ç†å‘˜æ”¶åˆ°åŒ…å«å®Œæ•´è¡¨å•æ•°æ®çš„é¢„è®¢è‰ç¨¿é‚®ä»¶</p>
        <p>âœ… <strong>æ•°æ®ä¿å­˜:</strong> localStorageä¸­ä¿å­˜å®Œæ•´çš„é¢„è®¢æ•°æ®</p>
        <p>âœ… <strong>æµç¨‹è·³è½¬:</strong> æ— è®ºé€‰æ‹©ä»€ä¹ˆå’¨è¯¢é€‰é¡¹ï¼Œéƒ½ç›´æ¥è·³è½¬åˆ°æ”¯ä»˜é¡µé¢</p>
        <p>âœ… <strong>æ•°æ®æ¢å¤:</strong> æ”¯ä»˜é¡µé¢èƒ½æ­£ç¡®æ˜¾ç¤ºé¢„è®¢æ‘˜è¦</p>
        <p>âœ… <strong>UIä¸å˜:</strong> æ‰€æœ‰ç°æœ‰ç•Œé¢å’Œæ ·å¼ä¿æŒä¸å˜</p>
    </div>

    <script>
        // æ¨¡æ‹Ÿå®Œæ•´çš„é¢„è®¢æ•°æ®
        const mockBookingData = {
            formData: {
                artistId: 'jing',
                name: 'Test User',
                email: 'test@example.com',
                phone: '(555) 123-4567',
                tattooIdea: 'A beautiful dragon tattoo with cherry blossoms',
                referenceImages: ['dragon_ref1.jpg', 'dragon_ref2.jpg'],
                additionalNotes: 'I want it to be colorful and detailed',
                instagramReference: '@testuser',
                backgroundStory: 'This represents my journey and strength',
                placement: 'Full sleeve on left arm',
                bodyPhotos: ['arm_photo1.jpg'],
                placementCertainty: 'Very certain',
                openToSuggestions: 'Yes, open to artist suggestions',
                colorPreference: 'I like vibrant colors, the more vivid, the better.',
                skinTone: 'Medium-Light',
                isFirstTattoo: 'I have 1-2 small walk-in tattoos from when I was young',
                additionalInfo: 'I have sensitive skin, please use gentle ink',
                needsConsultation: true
            },
            selectedArtist: {
                id: 'jing',
                name: 'Jingxi Gu',
                displayName: 'Jing',
                category: 'Lead Artist',
                deposit: 300
            },
            consultationChoice: true,
            timestamp: new Date().toISOString(),
            depositAmount: 300,
            status: 'PENDING_PAYMENT'
        };

        function testCompleteFlow() {
            console.log('ğŸ§ª æµ‹è¯•å®Œæ•´é¢„è®¢æµç¨‹...');
            
            // æ¨¡æ‹Ÿä¿å­˜åˆ°localStorage
            localStorage.setItem('patchTattooBooking', JSON.stringify(mockBookingData));
            
            // æ˜¾ç¤ºé‚®ä»¶é¢„è§ˆ
            displayEmailPreview(mockBookingData);
            
            // æ˜¾ç¤ºlocalStorageæ•°æ®
            displayLocalStorageData();
            
            console.log('âœ… å®Œæ•´é¢„è®¢æµç¨‹æµ‹è¯•å®Œæˆ');
        }

        function testConsultationChoice() {
            console.log('ğŸ§ª æµ‹è¯•å’¨è¯¢é€‰æ‹©é¡µé¢...');
            
            // æ¨¡æ‹Ÿå’¨è¯¢é€‰æ‹©é€»è¾‘
            const consultationChoice = Math.random() > 0.5;
            const updatedData = {
                ...mockBookingData,
                consultationChoice: consultationChoice,
                formData: {
                    ...mockBookingData.formData,
                    needsConsultation: consultationChoice
                }
            };
            
            // ä¿å­˜æ›´æ–°åçš„æ•°æ®
            localStorage.setItem('patchTattooBooking', JSON.stringify(updatedData));
            
            // æ˜¾ç¤ºé‚®ä»¶é¢„è§ˆ
            displayEmailPreview(updatedData);
            
            // æ˜¾ç¤ºlocalStorageæ•°æ®
            displayLocalStorageData();
            
            console.log(`âœ… å’¨è¯¢é€‰æ‹©æµ‹è¯•å®Œæˆ - é€‰æ‹©: ${consultationChoice ? 'éœ€è¦å’¨è¯¢' : 'ä¸éœ€è¦å’¨è¯¢'}`);
        }

        function testPaymentPage() {
            console.log('ğŸ§ª æµ‹è¯•æ”¯ä»˜é¡µé¢æ•°æ®æ¢å¤...');
            
            const savedData = localStorage.getItem('patchTattooBooking');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                console.log('ğŸ“‹ æ¢å¤çš„é¢„è®¢æ•°æ®:', parsedData);
                
                // æ˜¾ç¤ºæ¢å¤çš„æ•°æ®
                document.getElementById('localStorageData').innerHTML = 
                    `<strong>âœ… æ•°æ®æ¢å¤æˆåŠŸ!</strong><br>
                     <strong>å®¢æˆ·:</strong> ${parsedData.formData.name}<br>
                     <strong>è‰ºæœ¯å®¶:</strong> ${parsedData.selectedArtist.displayName}<br>
                     <strong>å®šé‡‘:</strong> $${parsedData.depositAmount}<br>
                     <strong>å’¨è¯¢:</strong> ${parsedData.consultationChoice ? 'éœ€è¦' : 'ä¸éœ€è¦'}<br>
                     <strong>æ—¶é—´:</strong> ${new Date(parsedData.timestamp).toLocaleString()}`;
            } else {
                console.log('âŒ æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„é¢„è®¢æ•°æ®');
                document.getElementById('localStorageData').innerHTML = 
                    '<strong>âŒ æ²¡æœ‰æ‰¾åˆ°ä¿å­˜çš„é¢„è®¢æ•°æ®</strong>';
            }
        }

        function clearTestData() {
            console.log('ğŸ§¹ æ¸…é™¤æµ‹è¯•æ•°æ®...');
            localStorage.removeItem('patchTattooBooking');
            document.getElementById('emailPreview').innerHTML = '<p>æµ‹è¯•æ•°æ®å·²æ¸…é™¤...</p>';
            document.getElementById('localStorageData').innerHTML = '<p>localStorageæ•°æ®å·²æ¸…é™¤...</p>';
            console.log('âœ… æµ‹è¯•æ•°æ®æ¸…é™¤å®Œæˆ');
        }

        function displayEmailPreview(data) {
            const preview = `
                <strong>ğŸ“§ é¢„è®¢è‰ç¨¿é‚®ä»¶é¢„è§ˆ:</strong><br><br>
                <strong>æ”¶ä»¶äºº:</strong> info@patchtattootherapy.com<br>
                <strong>ä¸»é¢˜:</strong> New Booking Request - Pending Payment<br><br>
                <strong>å®¢æˆ·ä¿¡æ¯:</strong><br>
                - å§“å: ${data.formData.name}<br>
                - é‚®ç®±: ${data.formData.email}<br>
                - ç”µè¯: ${data.formData.phone}<br><br>
                <strong>çº¹èº«å¸ˆ:</strong> ${data.selectedArtist.displayName}<br>
                <strong>å®šé‡‘:</strong> $${data.depositAmount}<br>
                <strong>å’¨è¯¢éœ€æ±‚:</strong> ${data.consultationChoice ? 'éœ€è¦' : 'ä¸éœ€è¦'}<br><br>
                <strong>çº¹èº«æƒ³æ³•:</strong> ${data.formData.tattooIdea}<br>
                <strong>ä½ç½®:</strong> ${data.formData.placement}<br>
                <strong>é¢œè‰²åå¥½:</strong> ${data.formData.colorPreference}<br>
                <strong>å‚è€ƒå›¾ç‰‡:</strong> ${data.formData.referenceImages.length} å¼ <br>
                <strong>èº«ä½“ç…§ç‰‡:</strong> ${data.formData.bodyPhotos.length} å¼ <br><br>
                <strong>çŠ¶æ€:</strong> ${data.status}<br>
                <strong>æ—¶é—´:</strong> ${new Date(data.timestamp).toLocaleString()}
            `;
            document.getElementById('emailPreview').innerHTML = preview;
        }

        function displayLocalStorageData() {
            const savedData = localStorage.getItem('patchTattooBooking');
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                document.getElementById('localStorageData').innerHTML = 
                    `<strong>ğŸ’¾ localStorageæ•°æ®:</strong><br>
                     <pre>${JSON.stringify(parsedData, null, 2)}</pre>`;
            } else {
                document.getElementById('localStorageData').innerHTML = 
                    '<strong>âŒ localStorageä¸­æ²¡æœ‰æ•°æ®</strong>';
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºå½“å‰çŠ¶æ€
        window.onload = function() {
            displayLocalStorageData();
        };
    </script>
</body>
</html>
